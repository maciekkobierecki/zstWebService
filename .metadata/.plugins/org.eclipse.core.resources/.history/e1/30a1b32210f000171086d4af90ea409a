<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>MIB Browser</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css">
<script language="javascript" type="text/javascript">
	var request = null;

	function createRequest() {
		try {
			request = new XMLHttpRequest();
		} catch (trymicrosoft) {
			try {
				request = new ActiveXObject("MsXML2.XMLHTTP");
			} catch (othermicrosoft) {
				try {
					request = new ActiveXObject("Microsoft.XMLHTTP");
				} catch (failed) {
					request = null;
				}
			}
		}

		if (request == null)
			alert("Error creating request object!");
	}

	function getMessage() {
		createRequest();
		var playerid = document.getElementById("playerid").value;
		id = eval(playerid);
		var url = "http://localhost:8081/zst-webservice/api/snmp/getTable?OID=.1.3.6.1.2.1.4.22&community=default";
		request.onreadystatechange = handleResponse;
		request.open("GET", url, true);
		request.send(null);
	}

	function getRequest() {
		createRequest();
		var oid = document.getElementById("oid").value;
		var url = "http://localhost:8081/zst-webservice/api/snmp/get?OID=" + oid
				+ "&community=default";
		request.onreadystatechange = handleGetResponse;
		request.open("GET", url, true);
		request.send(null);

	}

	function getNextRequest() {
		createRequest();
		var oid = document.getElementById("oid").value;
		var url = "http://localhost:8081/zst-webservice/api/snmp/getNext?OID=" + oid
				+ "&community=default";
		request.onreadystatechange = handleGetNextResponse;
		request.open("GET", url, true);
		request.send(null);
	}

	function handleGetResponse() {
		if (request.readyState == 4 && request.status == 200) {
			var det = eval("(" + request.responseText + ")");
			for ( var key in det) {
				document.getElementById('resultOID').value = key;
				document.getElementById('resultValue').value = det[key];
			}

		}
	}
	
	function handleGetNextResponse() {
		if (request.readyState == 4 && request.status == 200) {
			var det = eval("(" + request.responseText + ")");
			
			for ( var key in det) {
				document.getElementById("oid")=key;
				document.getElementById('resultOID').value = key;
				document.getElementById('resultValue').value = det[key];
			}

		}
	}
	
	function callApi(){
		var value=document.getElementById("function_name").selectedIndex;
		var choosed=document.getElementsByTagName("option")[value].value;
		switch(choosed){
		case "get":
			getRequest();
			break;
		case "getnext":
			getNextRequest();
			break;
		case "gettable":
			getTable();
			break;
		}
	}
</script>
</head>
<body>
	<div class="container">
		<div class="form">
			<input type="text" id="oid" placeholder="OID" size="50"> <select id="function_name">
				<option value="get">Get</option>
				<option value="getnext">Get Next</option>
				<option value="gettable">Get Table</option>
			</select> 
			<input type="submit" value="GO" onclick="callApi()">
		</div>
		<div class="results">
		Tutaj będą wyniki.
		
		<table>
			<tr>
			<td>OID:</td>

			<td><input type="text" id="resultOID" size="40" /></td>

			<td>Value:</td>

			<td><input type="text" id="resultValue" size="40" /></td>
		</table>
		</div>
	</div>
</body>
</html>